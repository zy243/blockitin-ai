<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login - BlockItIn</title>
    <link rel="stylesheet" href="style.css" />

    <!-- Include ethers.js from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/ethers/dist/ethers.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>Welcome to BlockItIn</h1>

        <!-- Connect MetaMask -->
        <button onclick="connectWallet()">🔗 Connect MetaMask</button>
        <p id="status"></p>

        <!-- Email and Password Login -->
        <h2>Login</h2>
        <input type="email" id="email" placeholder="Enter your email" required />
        <input type="password" id="password" placeholder="Enter your password" required />

        <h3>Select your role</h3>
        <div class="role-buttons">
            <button onclick="login('teacher')">👩‍🏫 Login as Teacher</button>
            <button onclick="login('student')">🧑‍🎓 Login as Student</button>
            <button onclick="login('doctor')">👨‍⚕️ Login as Doctor</button>

        </div>

        <p><a href="reset.html">Forgot Password?</a></p>
        <p>Don't have an account? <a href="signup.html">Sign up here</a></p>
    </div>

    <script>
        let provider;

        async function connectWallet() {
            if (typeof window.ethereum !== "undefined") {
                try {
                    provider = new ethers.providers.Web3Provider(window.ethereum);
                    await provider.send("eth_requestAccounts", []);
                    const signer = provider.getSigner();
                    const address = await signer.getAddress();
                    document.getElementById("status").innerText = "✅ Connected: " + address;
                } catch (error) {
                    console.error(error);
                    document.getElementById("status").innerText = "❌ Connection failed";
                }
            } else {
                alert("Please install MetaMask to use this app.");
            }
        }

        function login(role) {
            const email = document.getElementById("email").value.trim();
            const password = document.getElementById("password").value.trim();

            if (!email || !password) {
                alert("Please enter both email and password.");
                return;
            }

            localStorage.setItem("role", role);
            localStorage.setItem("email", email); // Save email if needed later

            // In a real app: you would verify credentials
            window.location.href = "dashboard.html";
        }
    </script>
</body>
</html>


